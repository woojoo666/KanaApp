<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<style>
		#containr{
			height: 500px;
			overflow: auto;
		}
	</style>
</head>
<body>
	<div id="containr"></div>

	<script>

var containr = document.getElementById('containr');

var hiragana = [
	"あ","い","う","え","お",
	"か","き","く","け","こ",
	"さ","し","す","せ","そ",
	"た","ち","つ","て","と",
	"な","に","ぬ","ね","の",
	"は","ひ","ふ","へ","ほ",
	"ま","み","む","め","も",
	"や","ゆ","よ",
	"ら","り","る","れ","ろ",
	"わ","を",
	"ん"];

var listtable = document.createElement('table');

var totalwidth = 300;
var maxwidth = 200;
var minwidth = 30;

for (var i = 0; i < hiragana.length; i++) {


	var r = hiragana[i] + "r";
	var t = hiragana[i] + "t";
	var score = (localStorage[t] > 0)? localStorage[r]/localStorage[t]: "NA";

	var row = document.createElement('tr');
	row.on = true;
	var left = document.createElement('td');
	left.innerHTML = hiragana[i] + ":";
	left.style.width = (localStorage[t] > 0)? Math.floor(score*(maxwidth - minwidth) + minwidth) + "px": minwidth + "px";

/*	var middle = document.createElement('td');
	middle.innerHTML = (localStorage[t] > 0)? Math.floor(score*100) + "%" : "NA";
	middle.style.width = (totalwidth - parseInt(left.style.width)) + "px";

	var middle = document.createElement('td');
	middle.style.width = totalwidth + "px";
	var spacer = document.createElement('span');
	spacer.innerHTML = "bla";
	spacer.style.width = (localStorage[t] > 0)? Math.floor(score*maxwidth) + "px": 0;
	var textspace = document.createElement('span');
	textspace.innerHTML = (localStorage[t] > 0)? Math.floor(score*100) + "%" : "NA";
	left.style.width = (localStorage[t] > 0)? Math.floor(score*(maxwidth - minwidth) + minwidth) + "px": minwidth + "px";
	middle.appendChild(spacer);
	middle.appendChild(textspace);*/

	var middle = document.createElement('td');
	middle.style.width = totalwidth + "px";
	var textspace = document.createElement('span');
	textspace.style.float = "left";
	textspace.style.textAlign = "right";
	textspace.innerHTML = (localStorage[t] > 0)? Math.floor(score*100) + "%" : "NA";
	textspace.style.width = (localStorage[t] > 0)? Math.floor(score*(maxwidth - minwidth) + minwidth) + "px": minwidth + "px";
	middle.appendChild(textspace);

	var right = document.createElement('td');
	right.innerHTML = "On";
	right.onclick = function() {toggle(this);};
	
	var clear = document.createElement('td');
	clear.innerHTML = "clear";

	row.appendChild(left);
	row.appendChild(middle);
	row.appendChild(right);
	row.appendChild(clear);
	listtable.appendChild(row);
	alert(parseInt(left.style.width));
}

function toggle(m) {
	var row = m.parentNode;
	row.on = !row.on;
	if (row.on) {
		m.innerHTML = "On";
		row.style.color = "rgba(0,0,0,1)";
	} else {
		m.innerHTML = "Off";
		row.style.color = "rgba(0,0,0,0.5)";
		m.style.width = "400px";
	}
}

containr.appendChild(listtable);

</script>
</body>
</html>